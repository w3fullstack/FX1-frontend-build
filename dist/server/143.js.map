{"version":3,"file":"143.js","sources":["webpack:///./components/pages/CreateNewPassword.vue?8cd1","webpack:///./components/pages/CreateNewPassword.vue?cab2","webpack:///./components/pages/CreateNewPassword.vue?375e","webpack:///components/pages/CreateNewPassword.vue","webpack:///./components/pages/CreateNewPassword.vue?6b18","webpack:///./components/pages/CreateNewPassword.vue","webpack:///./components/pages/CreateNewPassword.vue?ade7"],"sourcesContent":["export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateNewPassword.vue?vue&type=style&index=0&id=64f05dbe&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@media screen and (max-width:1023px){.xp-create-new-password[data-v-64f05dbe] .step-content .left-content{min-height:calc(100vh - 60px)!important;align-items:flex-start}}.xp-create-new-password[data-v-64f05dbe] .step-content .left-content .form-container form .actions .button{width:230px}@media screen and (max-width:767px){.xp-create-new-password[data-v-64f05dbe] .step-content .left-content .form-container form .actions .button{width:100%}}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"xp-create-new-password auth-page\"},[_vm._ssrNode(\"<div class=\\\"step-content row\\\" data-v-64f05dbe>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"left-content row items-center justify-center\\\" data-v-64f05dbe>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"form-container\\\" data-v-64f05dbe>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"form-header\\\" data-v-64f05dbe><h1 data-v-64f05dbe>Create new password</h1></div>\"),_vm._ssrNode(\"<form action=\\\"#\\\" autocomplete=\\\"off\\\" data-v-64f05dbe>\",\"</form>\",[_vm._ssrNode(\"<div class=\\\"mb-5\\\" data-v-64f05dbe>\",\"</div>\",[_c('XAFormsInput',{attrs:{\"type\":\"password\",\"placeholder\":\"New password\",\"disabled\":_vm.isSubmitting,\"error\":_vm.validation.firstError('password')},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1),_vm._ssrNode(\"<div class=\\\"mb-6\\\" data-v-64f05dbe>\",\"</div>\",[_c('XAFormsInput',{attrs:{\"type\":\"password\",\"placeholder\":\"Confirm new password\",\"disabled\":_vm.isSubmitting,\"error\":_vm.validation.firstError('passwordConfirmation')},model:{value:(_vm.passwordConfirmation),callback:function ($$v) {_vm.passwordConfirmation=$$v},expression:\"passwordConfirmation\"}})],1),_vm._ssrNode(\"<div class=\\\"actions\\\" data-v-64f05dbe>\",\"</div>\",[_c('b-button',{staticClass:\"btn-next\",attrs:{\"type\":\"is-primary\",\"loading\":_vm.isSubmitting,\"disabled\":_vm.isDisableSaveButton},on:{\"click\":function($event){$event.preventDefault();return _vm.fnSetNewPassword()}}},[_vm._v(\"Save\")])],1)])],2)]),_c('XMSignUpRightContent')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n.xp-create-new-password.auth-page\r\n  .step-content.row\r\n    .left-content.row.items-center.justify-center\r\n      .form-container\r\n        .form-header\r\n          h1 Create new password\r\n\r\n        form(action=\"#\", autocomplete=\"off\", @submit.prevent=\"\")\r\n          .mb-5\r\n            XAFormsInput(\r\n              v-model=\"password\",\r\n              type=\"password\",\r\n              placeholder=\"New password\",\r\n              :disabled=\"isSubmitting\",\r\n              :error=\"validation.firstError('password')\"\r\n            )\r\n\r\n          .mb-6\r\n            XAFormsInput(\r\n              v-model=\"passwordConfirmation\",\r\n              type=\"password\",\r\n              placeholder=\"Confirm new password\",\r\n              :disabled=\"isSubmitting\",\r\n              :error=\"validation.firstError('passwordConfirmation')\"\r\n            )\r\n\r\n          .actions\r\n            b-button.btn-next(\r\n              type=\"is-primary\",\r\n              :loading=\"isSubmitting\",\r\n              @click.prevent=\"fnSetNewPassword()\",\r\n              :disabled=\"isDisableSaveButton\"\r\n            ) Save\r\n    XMSignUpRightContent\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from 'vuex'\r\nimport { Validator } from 'simple-vue-validator'\r\n\r\nexport default {\r\n  validators: {\r\n    password(value) {\r\n      return Validator.value(value)\r\n        .required('Password field is required')\r\n        .custom(() => {\r\n          if (\r\n            !/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!\"#$%&'()*+,\\-./:;<=>?@[\\\\\\]^_`{|}~])[A-Za-z\\d!\"#$%&'()*+,\\-./:;<=>?@[\\\\\\]^_`{|}~]{8,}$/.test(\r\n              value\r\n            )\r\n          ) {\r\n            return 'Please ensure your password is at least 8 characters in length, and contains one number, upper and lowercase letters and one special character'\r\n          }\r\n        })\r\n    },\r\n    'passwordConfirmation, password'(passwordConfirmation, password) {\r\n      return Validator.value(passwordConfirmation)\r\n        .required('Password confirmation field is required')\r\n        .match(password, 'Please enter the same password in both fields')\r\n    },\r\n  },\r\n  name: 'XPCreateNewPassword',\r\n  components: {\r\n    XMSignUpRightContent: () =>\r\n      import('~/components/molecules/SignUp/RightContent'),\r\n    XAFormsInput: () => import('~/components/atoms/Forms/Input'),\r\n  },\r\n  data() {\r\n    return {\r\n      password: null,\r\n      passwordConfirmation: null,\r\n      isSubmitting: false,\r\n    }\r\n  },\r\n  computed: {\r\n    isDisableSaveButton() {\r\n      return !this.password || !this.passwordConfirmation\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      checkActionCode: 'auth/checkActionCode',\r\n      resetPassword: 'auth/resetPassword',\r\n    }),\r\n    fnSetNewPassword() {\r\n      this.isSubmitting = true\r\n      this.$validate().then(async (success) => {\r\n        if (success) {\r\n          try {\r\n            const actionCode = this.$route.query?.c\r\n            const result = await this.checkActionCode({ actionCode })\r\n\r\n            if (result) {\r\n              try {\r\n                const { password } = this\r\n                await this.resetPassword({ actionCode, password })\r\n\r\n                const message =\r\n                  'Password changed. Please login with new password'\r\n                const duration = 5000\r\n                await this.fnSuccessToast(message, duration)\r\n\r\n                this.$router.push({\r\n                  path: '/signin',\r\n                })\r\n              } catch (error) {\r\n                error?.response?.errors.forEach((error) => {\r\n                  this.$toast.success(error.message, {\r\n                    duration: 5000,\r\n                    position: 'bottom-left',\r\n                    className: 'fx1-success',\r\n                    iconPack: 'mdi',\r\n                    icon: 'alert-circle-outline',\r\n                  })\r\n                })\r\n              }\r\n            }\r\n          } catch (e) {\r\n            const message = e.toString()\r\n            const findError = (error) => {\r\n              if (message.includes(error)) {\r\n                return message\r\n              }\r\n            }\r\n\r\n            switch (message) {\r\n              case findError('invalid-action-code'):\r\n                this.$toast.error(\r\n                  'The action code is invalid. This can happen if the code is malformed, expired, or has already been used.',\r\n                  {\r\n                    duration: 5000,\r\n                    position: 'top-center',\r\n                  }\r\n                )\r\n                break\r\n\r\n              default:\r\n                break\r\n            }\r\n          } finally {\r\n            this.isSubmitting = false\r\n          }\r\n          return\r\n        }\r\n\r\n        this.isSubmitting = false\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.xp-create-new-password::v-deep {\r\n  .step-content {\r\n    .left-content {\r\n      @include max-width(1023px) {\r\n        min-height: calc(100vh - 60px) !important;\r\n        align-items: flex-start;\r\n      }\r\n\r\n      .form-container {\r\n        form {\r\n          .actions {\r\n            .button {\r\n              width: 230px;\r\n\r\n              @include max-width(767px) {\r\n                width: 100%;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateNewPassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateNewPassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateNewPassword.vue?vue&type=template&id=64f05dbe&scoped=true&lang=pug&\"\nimport script from \"./CreateNewPassword.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateNewPassword.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./CreateNewPassword.vue?vue&type=style&index=0&id=64f05dbe&prod&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"64f05dbe\",\n  \"4991532d\"\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-1-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateNewPassword.vue?vue&type=style&index=0&id=64f05dbe&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"25410b14\", content, true, context)\n};"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoCA;AACA;AAEA;AACA;AACA;AACA;AAGA;AAKA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;ACtJA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}