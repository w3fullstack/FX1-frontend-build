(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{1387:function(e,t,r){e.exports=r.p+"img/google.605f953.svg"},1929:function(e,t,r){var content=r(2263);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(35).default)("7cd0645d",content,!0,{sourceMap:!1})},2262:function(e,t,r){"use strict";r(1929)},2263:function(e,t,r){var n=r(34)(!1);n.push([e.i,"@media screen and (max-width:1023px){.xp-sign-in[data-v-efce236e] .step-content .left-content{min-height:calc(100vh - 60px)!important;align-items:flex-start}}.xp-sign-in[data-v-efce236e] .step-content .left-content .form-container form .forgot-password a{font-weight:400;color:#0c353e}",""]),e.exports=n},2621:function(e,t,r){"use strict";r.r(t);var n=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"_icon row"},[t("img",{attrs:{src:r(1387)}})])}],o=(r(17),r(16),r(14),r(19),r(20),r(38)),c=r(0),l=r(5),f=(r(27),r(8),r(28),r(31),r(13),r(81),r(75),r(79),r(124),r(11)),d=r(36),m=r(382);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x={name:"XPSignIn",validators:{email:function(e){return m.Validator.value(e).required("Sorry, we need a email to send you important updates").email("Hmmm, that email doesn't look right, maybe try again?")},password:function(e){return m.Validator.value(e).required("Sorry, please enter a secure password")}},components:{XAFormsInput:function(){return r.e(1).then(r.bind(null,2067))},XMSignUpRightContent:function(){return r.e(5).then(r.bind(null,2645))}},data:function(){return{isSubmitting:!1,isNewUser:!1,loginMethod:null,substringUrl:null,acceptInProcess:!1}},computed:h(h({},Object(f.b)("signup",["username","email","password","firstName","lastName","avatarSocial","signupOwnerManagerInvite","signupLockerRoomSupporting","signupMethod"])),Object(f.b)("user",["userID"])),methods:h(h({},Object(d.b)({authLoginWithEmail:"auth/authLoginWithEmail",authLoginWithGoogle:"auth/authLoginWithGoogle"})),{},{fnLoginViaEmail:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.isSubmitting=!0,e.loginMethod="Email",t.next=5,e.$validate();case 5:if(!t.sent){t.next=12;break}return r=e.email,n=e.password,t.next=10,e.authLoginWithEmail({email:r,password:n});case 10:return t.next=12,e.fnAfterLogin();case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),e.showError(t.t0);case 17:return t.prev=17,e.isSubmitting=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,14,17,20]])})))()},fnLoginViaGoogle:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,l,picture,f,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.validation.reset(),e.email=null,e.password=null,e.isSubmitting=!0,e.signupMethod="google",t.prev=5,t.next=8,e.authLoginWithGoogle();case 8:if(n=t.sent){t.next=11;break}return t.abrupt("return");case 11:return null!=n&&null!==(r=n.additionalUserInfo)&&void 0!==r&&r.isNewUser&&(o=n.additionalUserInfo.profile,c=o.family_name,l=o.given_name,picture=o.picture,f=o.email,e.email=f,e.firstName=c,e.lastName=l,e.avatarSocial=picture),t.next=14,e.fnCreateUser(n);case 14:return e.loginMethod="Google",t.next=17,e.fnAfterLogin();case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(5),null===t.t0||void 0===t.t0||null===(d=t.t0.response)||void 0===d||d.errors.forEach((function(t){e.$toast.success(t.message,{duration:5e3,position:"bottom-left",className:"fx1-success",iconPack:"mdi",icon:"alert-circle-outline"})}));case 22:return t.prev=22,e.isSubmitting=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[5,19,22,25]])})))()},fnCreateUser:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,input,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.additionalUserInfo.profile,o=n.family_name,c=n.given_name,l=e.result.user.accessToken,input={username:null,firstName:c,lastName:o,Avatar:null},r.prev=2,r.next=5,t.$api.createUser({input:input},{Authorization:"Bearer ".concat(l)});case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),null===r.t0||void 0===r.t0||null===(f=r.t0.response)||void 0===f||f.errors.forEach((function(e){t.$toast.success(e.message,{duration:5e3,position:"bottom-left",className:"fx1-success",iconPack:"mdi",icon:"alert-circle-outline"})}));case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()},fnAfterLogin:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.$route.query.accept,n={loginMethod:e.loginMethod,pageName:"Sign-in"},e.$mixpanelClient.trackLogin(n),r){t.next=8;break}return t.next=6,e.fnAcceptInvite();case 6:t.next=10;break;case 8:return t.next=10,e.fnAcceptPrivateInvitation();case 10:return t.next=12,e.fnRetrieveUserDetails();case 12:case"end":return t.stop()}}),t)})))()},fnAcceptInvite:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.signupOwnerManagerInvite){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$api.respondUserManagerialRoleInvite({id:null===(r=e.signupOwnerManagerInvite)||void 0===r?void 0:r.id});case 5:return n=t.sent,o=n.respondUserManagerialRoleInvite,t.next=9,e.$router.push({path:null==o?void 0:o.objectID});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),null===t.t0||void 0===t.t0||null===(c=t.t0.response)||void 0===c||c.errors.forEach((function(t){e.$toast.success(t.message,{duration:5e3,position:"bottom-left",className:"fx1-success",iconPack:"mdi",icon:"alert-circle-outline"})}));case 14:return t.prev=14,e.signupOwnerManagerInvite=null,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))()},fnRetrieveUserDetails:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n,c,l,f,d,m,v,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.acceptInProcess){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,r=e.$route.query.next,t.next=6,e.$api.getMyProfile();case 6:if(n=t.sent,c=n.Me,l=c.id,f=c.uid,e.userID=l,e.$mixpanel.identify(f),!e.signupLockerRoomSupporting){t.next=20;break}return t.next=15,e.fnSupportClub();case 15:return d=t.sent,m=d.urlSupport,t.next=19,e.$router.push({path:m});case 19:return t.abrupt("return");case 20:if(!r){t.next=26;break}return v="object"===Object(o.a)(r)&&r.length>0?r[0]:r,t.next=24,e.$router.push({path:v});case 24:t.next=34;break;case 26:if(!e.substringUrl){t.next=31;break}return t.next=29,e.$router.push(e.substringUrl);case 29:t.next=34;break;case 31:if(e.substring||e.acceptInProcess){t.next=34;break}return t.next=34,e.$router.push({path:"/explore"});case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(2),null===t.t0||void 0===t.t0||null===(h=t.t0.response)||void 0===h||h.errors.forEach((function(t){e.$toast.success(t.message,{duration:5e3,position:"bottom-left",className:"fx1-success",iconPack:"mdi",icon:"alert-circle-outline"})}));case 39:case"end":return t.stop()}}),t,null,[[2,36]])})))()},fnSupportClub:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.signupLockerRoomSupporting,n=r.id,o=r.slug,c=r.defaultChannelSlug,t.prev=1,t.next=4,e.$api.supportClub({lockerRoomID:n});case 4:return e.signupLockerRoomSupporting=null,t.abrupt("return",{urlSupport:"/locker-room/".concat(o,"/").concat(c)||!1});case 8:t.prev=8,t.t0=t.catch(1),null===t.t0||void 0===t.t0||null===(l=t.t0.response)||void 0===l||l.errors.forEach((function(t){e.$toast.success(t.message,{duration:5e3,position:"bottom-left",className:"fx1-success",iconPack:"mdi",icon:"alert-circle-outline"})}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},fnAcceptPrivateInvitation:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.acceptInProcess=!0,t.prev=1,t.next=4,e.$api.acceptInvitationToPrivateChannel({token:e.$route.query.accept});case 4:r=t.sent,n=r.acceptInvitationToPrivateChannel,o=n.objectID,c=o.indexOf("io")+2,e.substringUrl=o.substring(c),e.acceptInProcess=!1,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),e.showError(t.t0);case 15:return t.prev=15,e.isSubmitting=!1,e.acceptInProcess=!1,t.finish(15);case 19:case"end":return t.stop()}}),t,null,[[1,12,15,19]])})))()},showError:function(e){var t=e.toString(),r=function(e){if(t.includes(e))return t};switch(t){case r("user-not-found"):this.$toast.error("There is no user record found.",{duration:5e3,position:"top-center"});break;case r("wrong-password"):this.$toast.error("The password is invalid or the user does not have a password.",{duration:5e3,position:"top-center"});break;case r("cannot create or join more"):this.$toast.error("You cannot create or join more than one private group per game.",{duration:5e3,position:"top-center"});break;case r("you must be logged in"):this.$toast.error("Sorry, you must be logged in to take this action.",{duration:5e3,position:"top-center"});break;case r("Invite does not exist"):this.$toast.error("User Invite does not exist.",{duration:5e3,position:"top-center"});break;case r("invitation is not valid"):this.$toast.error("The invitation is not valid.",{duration:5e3,position:"top-center"});break;case r("Channel does not exist"):this.$toast.error("The Private Channel does not exist.",{duration:5e3,position:"top-center"})}}})},w=(r(2262),r(10)),component=Object(w.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"xp-sign-in auth-page"},[r("div",{staticClass:"step-content row"},[r("div",{staticClass:"left-content row items-center justify-center"},[r("div",{staticClass:"form-container"},[r("div",{staticClass:"form-header"},[r("h1",[e._v("Sign In")]),r("h4",{staticClass:"text-weight-light"},[e._v("New user? "),r("nuxt-link",{attrs:{to:"/signup?step=1"}},[e._v("Create an account")])],1)]),r("form",{attrs:{action:"#",autocomplete:"off"}},[r("div",{staticClass:"mb-5"},[r("XAFormsInput",{attrs:{id:"IEmail",placeholder:"Email",disabled:e.isSubmitting,error:e.validation.firstError("email")},on:{enter:function(t){return e.fnLoginViaEmail()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),r("div",{staticClass:"mb-3"},[r("XAFormsInput",{attrs:{id:"IPassword",type:"password",placeholder:"Password",disabled:e.isSubmitting,error:e.validation.firstError("password")},on:{enter:function(t){return e.fnLoginViaEmail()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("div",{staticClass:"forgot-password mb-6"},[r("nuxt-link",{attrs:{to:"/forgot-password"}},[e._v("Forgot Password?")])],1),r("div",{staticClass:"actions"},[r("div",{staticClass:"mb-4"},[r("b-button",{staticClass:"btn-next",attrs:{id:"BSubmit",type:"is-primary",loading:e.isSubmitting},on:{click:function(t){return t.preventDefault(),e.fnLoginViaEmail()}}},[e._v("Sign In")])],1),r("div",{staticClass:"row"},[r("div",{staticClass:"btn-google row items-center justify-center",class:[e.isSubmitting&&"disabled"],on:{click:function(t){return t.preventDefault(),e.fnLoginViaGoogle()}}},[e._m(0),r("div",{staticClass:"value"},[e._v("Sign In with Google")])])])])])])]),r("XMSignUpRightContent")],1)])}),n,!1,null,"efce236e",null);t.default=component.exports}}]);