(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1090:function(e,t,r){var n=r(1095);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},1091:function(e,t){e.exports=function(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}},1092:function(e,t,r){var n=r(380),o=r(614),c=r(615);e.exports=function(e,t){return c(o(e,t,n),e+"")}},1093:function(e,t,r){var n=r(1094),o=r(381),c=r(1098);e.exports=function(e,t,r){var l=e.length;if(l<2)return l?c(e[0]):[];for(var d=-1,h=Array(l);++d<l;)for(var f=e[d],m=-1;++m<l;)m!=d&&(h[d]=n(h[d]||f,e[m],t,r));return c(o(h,1),t,r)}},1094:function(e,t,r){var n=r(609),o=r(1090),c=r(1091),l=r(612),d=r(613),h=r(610);e.exports=function(e,t,r,f){var m=-1,v=o,x=!0,w=e.length,y=[],k=t.length;if(!w)return y;r&&(t=l(t,d(r))),f?(v=c,x=!1):t.length>=200&&(v=h,x=!1,t=new n(t));e:for(;++m<w;){var C=e[m],S=null==r?C:r(C);if(C=f||0!==C?C:0,x&&S==S){for(var O=k;O--;)if(t[O]===S)continue e;y.push(C)}else v(t,S,f)||y.push(C)}return y}},1095:function(e,t,r){var n=r(618),o=r(1096),c=r(1097);e.exports=function(e,t,r){return t==t?c(e,t,r):n(e,o,r)}},1096:function(e,t){e.exports=function(e){return e!=e}},1097:function(e,t){e.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},1098:function(e,t,r){var n=r(609),o=r(1090),c=r(1091),l=r(610),d=r(1099),h=r(611);e.exports=function(e,t,r){var f=-1,m=o,v=e.length,x=!0,w=[],y=w;if(r)x=!1,m=c;else if(v>=200){var k=t?null:d(e);if(k)return h(k);x=!1,m=l,y=new n}else y=t?[]:w;e:for(;++f<v;){var C=e[f],S=t?t(C):C;if(C=r||0!==C?C:0,x&&S==S){for(var O=y.length;O--;)if(y[O]===S)continue e;t&&y.push(S),w.push(C)}else m(y,S,r)||(y!==w&&y.push(S),w.push(C))}return w}},1099:function(e,t,r){var n=r(617),o=r(1100),c=r(611),l=n&&1/c(new n([,-0]))[1]==1/0?function(e){return new n(e)}:o;e.exports=l},1100:function(e,t){e.exports=function(){}},1101:function(e,t,r){var n=r(379),o=r(189);e.exports=function(e){return o(e)&&n(e)}},1115:function(e,t,r){var n=r(616),o=r(1092),c=r(1093),l=r(1101),d=o((function(e){return c(n(e,l))}));e.exports=d},1263:function(e,t,r){var content=r(1318);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(35).default)("3b18f60d",content,!0,{sourceMap:!1})},1308:function(e,t,r){"use strict";r(17),r(16),r(19),r(13),r(20);var n=r(93),o=r(5),c=(r(56),r(190),r(81),r(14),r(8),r(36));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={name:"GifsComponent",props:{search:{type:String,required:!0},fullScreen:{type:Boolean,default:!1},styles:{type:Object,default:function(){return{height:"calc(100vh - 240px) !important"}}},activeNav:{type:String,required:!0},gifsToRender:{type:Array,required:!0},handleScroll:{type:Function,default:null}},data:function(){return{isFullScreen:!1,windowWidth:null}},computed:d(d({},Object(c.c)({recentGifs:"chats/getRecentGifs",recentStickers:"chats/getRecentStickers"})),{},{recentImages:function(){switch(this.activeNav){case"GIF":return this.recentGifs;case"Sticker":return this.recentStickers;default:return[]}},imagesToRender:function(){var e=this;return this.search?this.gifsToRender:[].concat(Object(n.a)(this.recentImages),Object(n.a)(this.gifsToRender.filter((function(t){return!e.recentImages.some((function(e){return e.id===t.id}))}))))}}),watch:{fullScreen:{deep:!0,handler:function(e){this.isFullScreen=e}}},mounted:function(){window.addEventListener("resize",this.onResize)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:d(d(d({},Object(c.b)({setRecentGifs:"chats/setRecentGifs",setRecentStickers:"chats/setRecentStickers"})),Object(c.d)("giphy",["setSelectedGif"])),{},{handleGifsContainerScroll:function(e){this.$emit("handleScroll",e)},handleClick:function(e){this.setSelectedGif(e.images.fixed_height.webp),"GIF"===this.activeNav?this.setRecentGifs(e):"Sticker"===this.activeNav&&this.setRecentStickers(e)},onResize:function(){this.windowWidth=window.innerWidth}})},f=(r(1317),r(10)),component=Object(f.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gifs",style:e.isFullScreen&&e.windowWidth<427?e.styles:null},[r("input",{staticClass:"gifs-search",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.search},on:{input:function(t){return e.$emit("updateSearch",t.target.value)}}}),r("div",{ref:"gifsContainerRef",staticClass:"gifs-container",class:{toggle:e.isFullScreen},on:{scroll:e.handleGifsContainerScroll}},e._l(e.imagesToRender,(function(t,n){return r("div",{key:t.id+n,staticClass:"gifs-item",on:{click:function(r){return e.handleClick(t)}}},[r("img",{attrs:{src:t.images.fixed_height_small.webp,alt:"gif"}})])})),0)])}),[],!1,null,null,null);t.a=component.exports},1312:function(e,t,r){"use strict";var n=r(21),o=r(385).charAt,c=r(84),l=r(153),d=r(61);n({target:"String",proto:!0,forced:!0},{at:function(e){var t=d(c(this)),r=t.length,n=l(e),h=n>=0?n:r+n;return h<0||h>=r?void 0:o(t,h)}})},1313:function(e,t,r){var n=r(41),o=r(152);e.exports=function(e,t,r){var c=!0,l=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(r)&&(c="leading"in r?!!r.leading:c,l="trailing"in r?!!r.trailing:l),n(e,t,{leading:c,maxWait:t,trailing:l})}},1314:function(e,t){(()=>{var t={702:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if("object"===n(e)){if(e.getRangeAt){if(0==e.rangeCount)return;e=e.getRangeAt(0)}if(e.cloneRange){var r=e.cloneRange();r.collapse(!0),1==(e=r.startContainer).nodeType&&(e=e.childNodes[r.startOffset])}if(e){for(var o=e;o&&1!=o.nodeType;)o=o.previousSibling;(e=o||e.parentNode)&&function(e,t){if(e.scrollIntoViewIfNeeded)e.scrollIntoViewIfNeeded(!1);else{t=t||e.parentElement;var r=e.offsetTop-t.scrollTop;(0>r||r>t.offsetHeight-e.offsetHeight)&&(t.scrollTop=e.offsetTop)}}(e,t)}}}function i(e){var t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(e))}function a(){var e=window.getSelection();if(e&&0<e.rangeCount)return e.getRangeAt(0)}function s(e,t){return t.map((function(t){return{at:t,index:e.lastIndexOf(t)}})).reduce((function(e,t){return e.index>t.index?e:t}))}function c(e,t){t=t||window;for(var r={top:e.offsetTop,left:e.offsetLeft},n=e.offsetParent;null!=n&&n!=t;)r.left+=n.offsetLeft,r.top+=n.offsetTop,n=n.offsetParent;return r}function u(e,t){do{if(t(e))return e}while(e=e&&e.parentNode)}function l(){var e=a();if(e){var t=e.cloneRange();return t.collapse(!0),t.setStart(t.endContainer,0),t}}r.d(t,{DN:()=>s,Q5:()=>i,oq:()=>u,os:()=>c,rx:()=>a,z4:()=>l,zT:()=>o})},563:(e,t,r)=>{(e.exports=r(788)(!1)).push([e.id,".atwho-view{color:#000;border-radius:3px;box-shadow:0 0 5px rgba(0,0,0,.1);min-width:120px;z-index:11110!important}.atwho-ul{list-style:none}.atwho-li{display:block}.atwho-view{border-radius:6px;box-shadow:0 0 10px 0 hsla(211,9%,44%,.5)}.atwho-ul{max-height:135px;padding:0;margin:0}.atwho-li{box-sizing:border-box;height:27px;padding:0 12px;white-space:nowrap;display:flex;align-items:center}.atwho-li span{overflow:hidden;text-overflow:ellipsis}.atwho-cur{background:#5bb8ff;color:#fff}.atwho-wrap{position:relative}.atwho-panel{position:absolute}.atwho-inner{position:relative}.atwho-view{position:absolute;bottom:0;left:-.8em;cursor:default;background-color:hsla(0,0%,100%,.94);min-width:140px;max-width:180px;max-height:200px;overflow-y:auto}.atwho-view::-webkit-scrollbar{width:11px;height:11px}.atwho-view::-webkit-scrollbar-track{background-color:#f5f5f5}.atwho-view::-webkit-scrollbar-thumb{min-height:36px;border:2px solid transparent;border-top:3px solid transparent;border-bottom:3px solid transparent;background-clip:padding-box;border-radius:7px;background-color:#c4c4c4}",""])},788:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var a,r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var o=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[r].concat(i).concat([o]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},486:(e,t,r)=>{"use strict";function n(e,t,r,n,o,i,a,s){var c=typeof(e=e||{}).default;"object"!==c&&"function"!==c||(e=e.default);var u,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=i),a?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=u):o&&(u=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),u)if(l.functional){l._injectStyles=u;var d=l.render;l.render=function(e,t){return u.call(t),d(e,t)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,u):[u]}return{exports:e,options:l}}r.d(t,{Z:()=>n})},710:(e,t,r)=>{var n=r(563);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,r(950).Z)("63976156",n,!0,{})},950:(e,t,r)=>{"use strict";function n(e,t){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o],a=i[0],s={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}r.d(t,{Z:()=>p});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,l=function(){},d=null,h="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,r,o){u=r,d=o||{};var a=n(e,t);return m(a),function(t){for(var r=[],o=0;o<a.length;o++){var s=a[o];(c=i[s.id]).refs--,r.push(c)}for(t?m(a=n(e,t)):a=[],o=0;o<r.length;o++){var c;if(0===(c=r[o]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete i[c.id]}}}}function m(e){for(var t=0;t<e.length;t++){var r=e[t],n=i[r.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](r.parts[o]);for(;o<r.parts.length;o++)n.parts.push(b(r.parts[o]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(b(r.parts[o]));i[r.id]={id:r.id,refs:1,parts:a}}}}function v(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function b(e){var t,r,n=document.querySelector("style["+h+'~="'+e.id+'"]');if(n){if(u)return l;n.parentNode.removeChild(n)}if(f){var o=c++;n=s||(s=v()),t=w.bind(null,n,o,!1),r=w.bind(null,n,o,!0)}else n=v(),t=y.bind(null,n),r=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else r()}}var x,g=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function w(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function y(e,t){var r=t.css,n=t.media,o=t.sourceMap;if(n&&e.setAttribute("media",n),d.ssrId&&e.setAttribute(h,t.id),o&&(r+="\n/*# sourceURL="+o.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={id:e,exports:{}};return t[e](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n.d(o,{default:()=>u});var e=n(702),t=n(486);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?i(Object(t),!0).forEach((function(r){s(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const r={name:"At",mixins:[(0,t.Z)(null,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"wrap",staticClass:"atwho-wrap",on:{compositionstart:e.handleCompositionStart,compositionend:e.handleCompositionEnd,input:function(t){return e.handleInput()},"!keydown":function(t){return e.handleKeyDown.apply(null,arguments)}}},[e.atwho?r("div",{staticClass:"atwho-panel",style:e.style},[r("div",{staticClass:"atwho-inner"},[r("div",{staticClass:"atwho-view"},[r("ul",{staticClass:"atwho-ul"},e._l(e.atwho.list,(function(t,n){return r("li",{key:n,ref:e.isCur(n)&&"cur",refInFor:!0,staticClass:"atwho-li",class:e.isCur(n)&&"atwho-cur",attrs:{"data-index":n},on:{mouseenter:e.handleItemHover,click:e.handleItemClick}},[e._t("item",(function(){return[r("span",{domProps:{textContent:e._s(e.itemName(t))}})]}),{item:t})],2)})),0)])])]):e._e(),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"embeddedItem"},[e._t("embeddedItem",null,{current:e.currentItem})],2),e._v(" "),e._t("default")],2)}),[],!1,(function(e){n(710)}),null,null).exports],props:{value:{type:String,default:null},at:{type:String,default:null},ats:{type:Array,default:function(){return["@"]}},suffix:{type:String,default:" "},loop:{type:Boolean,default:!0},allowSpaces:{type:Boolean,default:!0},tabSelect:{type:Boolean,default:!1},avoidEmail:{type:Boolean,default:!0},showUnique:{type:Boolean,default:!0},hoverSelect:{type:Boolean,default:!0},members:{type:Array,default:function(){return[]}},nameKey:{type:String,default:""},filterMatch:{type:Function,default:function(e,t){return-1<e.toLowerCase().indexOf(t.toLowerCase())}},deleteMatch:{type:Function,default:function(e,t,r){return t===e+r}},scrollRef:{type:String,default:""}},data:function(){return{bindsValue:null!=this.value,customsEmbedded:!1,hasComposition:!1,atwho:null}},computed:{atItems:function(){return this.at?[this.at]:this.ats},currentItem:function(){return this.atwho?this.atwho.list[this.atwho.cur]:""},style:function(){if(this.atwho){var t=this.atwho,r=(t.list,t.cur,t.x),n=t.y,o=this.$refs.wrap;if(o){var i=(0,e.os)(o),a=this.scrollRef?document.querySelector(this.scrollRef).scrollLeft:0,s=this.scrollRef?document.querySelector(this.scrollRef).scrollTop:0;return{left:r+a+window.pageXOffset-i.left+"px",top:n+s+window.pageYOffset-i.top+"px"}}}return null}},watch:{"atwho.cur":function(e){var t=this;null!=e&&this.$nextTick((function(){t.scrollToCur()}))},members:function(){this.handleInput(!0)},value:function(e){this.bindsValue&&this.handleValueUpdate(e)}},mounted:function(){this.$scopedSlots.embeddedItem&&(this.customsEmbedded=!0),this.bindsValue&&this.handleValueUpdate(this.value)},methods:{itemName:function(e){var t=this.nameKey;return t?e[t]:e},isCur:function(e){return e===this.atwho.cur},handleValueUpdate:function(e){var t=this.$el.querySelector("[contenteditable]");e!==t.innerHTML&&(t.innerHTML=e,this.dispatchInput())},dispatchInput:function(){var e=this.$el.querySelector("[contenteditable]"),t=new Event("input",{bubbles:!0});e.dispatchEvent(t)},handleItemHover:function(e){this.hoverSelect&&this.selectByMouse(e)},handleItemClick:function(e){this.selectByMouse(e),this.insertItem()},handleDelete:function(t){var r=(0,e.z4)();if(r){if(this.customsEmbedded&&1<=r.endOffset){var n=r.endContainer.childNodes[r.endOffset]||r.endContainer.childNodes[r.endOffset-1];if(!n||n.nodeType===Node.TEXT_NODE&&!/^\s?$/.test(n.data))return;n.nodeType===Node.TEXT_NODE?n.previousSibling&&(n=n.previousSibling):n.previousElementSibling&&(n=n.previousElementSibling);var o,i=[].slice.call(n.childNodes);if((i=[].reverse.call(i)).unshift(n),[].some.call(i,(function(e){if(e.getAttribute&&null!=e.getAttribute("data-at-embedded"))return o=e,!0})),o){t.preventDefault(),t.stopPropagation();var a=(0,e.rx)();a&&(a.setStartBefore(o),a.deleteContents(),(0,e.Q5)(a),this.handleInput())}return}var s=this.atItems,c=this.members,u=this.suffix,l=this.deleteMatch,d=this.itemName,h=r.toString(),f=(0,e.DN)(h,s),p=f.at,m=f.index;if(-1<m){var v=h.slice(m+p.length),b=c.some((function(e){var t=d(e);return l(t,v,u)}));if(b){t.preventDefault(),t.stopPropagation();var x=(0,e.rx)();x&&(x.setStart(x.endContainer,m),x.deleteContents(),(0,e.Q5)(x),this.handleInput())}}}},handleKeyDown:function(e){var t=this;if(this.atwho){if(38===e.keyCode||40===e.keyCode)return void(e.metaKey||e.ctrlKey||(e.preventDefault(),e.stopPropagation(),this.selectByKeyboard(e)));if(13===e.keyCode||this.tabSelect&&9===e.keyCode)return e.preventDefault(),e.stopPropagation(),void this.insertItem();if(27===e.keyCode)return void this.closePanel()}(48<=e.keyCode&&90>=e.keyCode||8===e.keyCode)&&setTimeout((function(){t.handleInput()}),50),8===e.keyCode&&this.handleDelete(e)},handleCompositionStart:function(){this.hasComposition=!0},handleCompositionEnd:function(){this.hasComposition=!1,this.handleInput()},handleInput:function(t){if(!this.hasComposition){var r=this.$el.querySelector("[contenteditable]");this.$emit("input",r.innerHTML);var n=(0,e.z4)();if(n){var o=this.atItems,i=this.avoidEmail,a=this.allowSpaces,s=this.showUnique,c=!0,u=n.toString(),l=(0,e.DN)(u,o),d=l.at,h=l.index;0>h&&(c=!1);var f=u[h-1],p=u.slice(h+d.length,u.length);if(i&&/^[a-z0-9]$/i.test(f)&&(c=!1),!a&&/\s/.test(p)&&(c=!1),/^\s/.test(p)&&(c=!1),c){var m=this.members,v=this.filterMatch,b=this.itemName;!t&&p&&this.$emit("at",p);var x=m.filter((function(e){var t=b(e);return v(t,p,d)}));if(c=!1,x.length&&(c=!0,!s)){var g=x[0];p===b(g)&&(c=!1)}c?this.openPanel(x,n,h,d):this.closePanel()}else this.closePanel()}}},closePanel:function(){this.atwho&&(this.atwho=null)},openPanel:function(e,t,r,n){var o=this,i=function(){var i=t.cloneRange();i.setStart(i.endContainer,r+n.length);var a=i.getClientRects()[0];o.atwho={range:t,offset:r,list:e,x:a.left,y:a.top-4,cur:0}};this.atwho?i():setTimeout(i,10)},scrollToCur:function(){var t=this.$refs.cur[0],r=t.parentElement.parentElement;(0,e.zT)(t,r)},selectByMouse:function(t){var r=(0,e.oq)(t.target,(function(e){return e.getAttribute("data-index")})),n=+r.getAttribute("data-index");this.atwho=a(a({},this.atwho),{},{cur:n})},selectByKeyboard:function(e){var t=38===e.keyCode?-1:1,r=this.atwho,n=r.cur,o=r.list,i=this.loop?(n+t+o.length)%o.length:Math.max(0,Math.min(n+t,o.length-1));this.atwho=a(a({},this.atwho),{},{cur:i})},insertText:function(t,r){r.deleteContents();var n=r.endContainer;if(n.nodeType===Node.TEXT_NODE){var o=r.endOffset;n.data=n.data.slice(0,o)+t+n.data.slice(o),r.setEnd(n,o+t.length)}else{var i=document.createTextNode(t);r.insertNode(i),r.setEndAfter(i)}r.collapse(!1),(0,e.Q5)(r),this.dispatchInput()},insertHtml:function(t,r){r.deleteContents();var n=r.endContainer,o=document.createElement("span");if(o.appendChild(document.createTextNode(" ")),o.appendChild(this.htmlToElement(t)),o.appendChild(document.createTextNode(" ")),o.setAttribute("data-at-embedded",""),o.setAttribute("contenteditable",!1),n.nodeType===Node.TEXT_NODE){var i=r.endOffset,a=n.splitText(i);n.parentNode.insertBefore(o,a),r.setEndBefore(a)}else{var s=document.createTextNode(this.suffix);r.insertNode(o),r.setEndAfter(o),r.insertNode(s),r.setEndAfter(s)}r.collapse(!1),(0,e.Q5)(r)},insertItem:function(){var t=this.atwho,r=t.range,n=(t.offset,t.list),o=t.cur,i=this.suffix,a=this.atItems,s=this.itemName,c=this.customsEmbedded,u=r.cloneRange(),l=r.toString(),d=(0,e.DN)(l,a),h=d.at,f=d.index,p=c?f:f+h.length;u.setStart(u.endContainer,p),(0,e.Q5)(u),(0,e.Q5)(u);var m=n[o];if(c){var v=this.$refs.embeddedItem.firstChild.innerHTML;this.insertHtml(v,u)}else{var b=s(m)+i;this.insertText(b,u)}this.$emit("insert",m),this.handleInput(),(0,e.zT)(u)},htmlToElement:function(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}}},u=(0,t.Z)(r,void 0,void 0,!1,null,null,null).exports})(),e.exports=o})()},1317:function(e,t,r){"use strict";r(1263)},1318:function(e,t,r){var n=r(34)(!1);n.push([e.i,".gifs{width:100%;height:100%;position:relative}@media screen and (min-width:1400px){.gifs{height:100%!important}}@media screen and (max-width:767px){.gifs{height:100%!important}}.gifs-search{min-height:36px!important;border:1px solid #2a4e55;border-radius:4px;width:90%;margin:21px;background-color:#0c353e;color:#94a6aa;font-weight:400;font-size:14px;line-height:15px;padding:0 8px}@media(min-width:500px)and (max-width:767px){.gifs-search{width:94%}}@media(min-width:375px)and (max-width:500px){.gifs-search{width:92%}}.gifs-container{display:flex;flex-wrap:wrap;justify-content:space-evenly;margin:0 18px;height:200px;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none}@media screen and (max-width:1400px){.gifs-container{height:200px!important;width:92%}}@media screen and (max-width:767px){.gifs-container{height:272px!important}}.gifs-container::-webkit-scrollbar,.gifs-container::-webkit-scrollbar-track{display:none}.gifs-container::-webkit-scrollbar-thumb{display:none}@media screen and (max-width:500px){.gifs .toggle{height:400px!important}}.gifs-item img{padding:0 3px;width:100px;height:100px;-o-object-fit:cover;object-fit:cover;cursor:pointer}",""]),e.exports=n},2064:function(e,t,r){var content=r(2558);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(35).default)("4b1580c6",content,!0,{sourceMap:!1})},2557:function(e,t,r){"use strict";r(2064)},2558:function(e,t,r){var n=r(34),o=r(228),c=r(1407),l=n(!1),d=o(c);l.push([e.i,'.private-chat[data-v-a87ff42c]{height:calc(100% - 60px)!important;-ms-overflow-style:none;scrollbar-width:none}@media screen and (max-width:750px){.private-chat[data-v-a87ff42c]{padding-bottom:0!important}}.xo-explore-event-chat.hide .xo-channels-chat-input.is-supporting[data-v-a87ff42c]{margin-bottom:-100px}.xo-channels-chat-input.is-supporting[data-v-a87ff42c]{padding:20px;position:absolute;bottom:0;width:100%}@media screen and (max-width:767px){.xo-channels-chat-input.is-supporting[data-v-a87ff42c]{position:absolute!important;width:100%!important;padding:22px 30px;bottom:0!important}}.xt-locker-room-supported[data-v-a87ff42c]{height:100%;width:100%}.xt-locker-room-supported[data-v-a87ff42c] .navigation{display:flex;align-items:center;justify-content:space-evenly;position:relative;width:100%;min-height:70px;background-color:#08252c;border-top:1px solid #2a4e55;z-index:2}.xt-locker-room-supported[data-v-a87ff42c] .navigation .nav-button{max-width:20px;max-height:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;opacity:.5}.xt-locker-room-supported[data-v-a87ff42c] .navigation .nav-button span{margin-top:7px;font-weight:400;font-size:14px;line-height:15px;color:#fff}.xt-locker-room-supported[data-v-a87ff42c] .navigation .nav-button-active{opacity:1}.xt-locker-room-supported[data-v-a87ff42c] .emoji{position:relative;left:-5px;padding-top:15px;background-color:#08252c;border-top-left-radius:30px;border-top-right-radius:30px;width:100%!important}.xt-locker-room-supported[data-v-a87ff42c] .emoji-mart{height:270px}@media screen and (min-width:1400px){.xt-locker-room-supported[data-v-a87ff42c] .emoji-mart{height:400px!important}}@media screen and (max-width:767px){.xt-locker-room-supported[data-v-a87ff42c] .emoji .openEmoji{min-height:657px!important}}@media screen and (max-width:425px){.xt-locker-room-supported[data-v-a87ff42c] .emoji .openEmoji{min-height:467px!important}}.xt-locker-room-supported[data-v-a87ff42c] .emoji .close{position:relative;top:8px;left:78%;cursor:pointer}.xt-locker-room-supported[data-v-a87ff42c] .emoji .close span{margin-right:10px}@media screen and (max-width:1150px){.xt-locker-room-supported[data-v-a87ff42c] .emoji .close{left:80%}}.xt-locker-room-supported[data-v-a87ff42c] .emoji .emoji-mart-search input{min-height:36px!important;border:1px solid #2a4e55;border-radius:4px;width:90%;margin:15px;background-color:#0c353e;color:#94a6aa;font-weight:400;font-size:14px;line-height:15px}@media screen and (max-width:1150px){.xt-locker-room-supported[data-v-a87ff42c] .emoji .emoji-mart-search input{width:93%}}.xt-locker-room-supported[data-v-a87ff42c] .emoji .emoji-mart-scroll{padding:0 6px 6px 18px;-ms-overflow-style:none;scrollbar-width:none}.xt-locker-room-supported[data-v-a87ff42c] .emoji .emoji-mart-scroll::-webkit-scrollbar,.xt-locker-room-supported[data-v-a87ff42c] .emoji .emoji-mart-scroll::-webkit-scrollbar-track{display:none}.xt-locker-room-supported[data-v-a87ff42c] [id^=tippy-]{width:100%!important;bottom:10px!important;pointer-events:inherit!important;z-index:100!important}.xt-locker-room-supported[data-v-a87ff42c] .h100vh{height:100vh!important;border-left:1px solid #385860!important}.xt-locker-room-supported[data-v-a87ff42c] .chat-container{height:100%}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container{overflow-y:scroll!important;-ms-overflow-style:none;scrollbar-width:none;height:calc(100% - 70px)}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container.cutted{height:87%}@media screen and (max-width:767px){.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container{height:calc(100% - 58px)!important}}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container .vuebar{height:100%!important;padding:12px!important;display:block;overflow-x:hidden;overflow-y:scroll;overflow:hidden scroll;box-sizing:content-box}@media screen and (max-width:480px){.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container .vuebar{height:95%!important}}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container.vb>.vb-dragger{z-index:5;width:12px;right:0;opacity:0}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container.vb>.vb-dragger>.vb-dragger-styler{backface-visibility:hidden;transform:rotate3d(0,0,0,0);transition:background-color .1s ease-out,margin .1s ease-out,height .1s ease-out;background-color:#08252c;margin:5px 2px 0;border-radius:20px;height:calc(100% - 10px);display:block}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container.vb>.vb-dragger:hover>.vb-dragger-styler{background-color:#08252c;height:100%}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container.vb.vb-scrolling-phantom>.vb-dragger>.vb-dragger-styler{background-color:#08252c}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container.vb.vb-dragging>.vb-dragger>.vb-dragger-styler{background-color:#08252c;height:100%}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container.vb.vb-dragging-phantom>.vb-dragger>.vb-dragger-styler{background-color:#08252c}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container.vb:hover>.vb-dragger{opacity:.8}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .chat-history-container::-webkit-scrollbar{display:none}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private,.xt-locker-room-supported[data-v-a87ff42c] .chat-container .public{height:100%}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private .chat-history-container,.xt-locker-room-supported[data-v-a87ff42c] .chat-container .public .chat-history-container{position:relative}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private .chat-history-container .xo-channels-chat-input.is-supporting,.xt-locker-room-supported[data-v-a87ff42c] .chat-container .public .chat-history-container .xo-channels-chat-input.is-supporting{padding:51px 30px;padding-bottom:0!important;width:100%}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation{height:100%}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step{overflow-y:scroll;height:calc(100% - 92px);padding:25px 12px;-ms-overflow-style:none;scrollbar-width:none}@media screen and (max-width:427px){.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step{height:calc(100% - 111px)!important}}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step span{font-weight:400;font-size:14px;line-height:20px;color:#fff;opacity:.7;text-transform:uppercase}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step input{margin:25px 0;background-color:transparent;border:1px solid #2a4e55!important;color:#94a6aa!important}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step input::-moz-placeholder{color:#94a6aa!important}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step input::placeholder{color:#94a6aa!important}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step p{font-weight:400;font-size:14px;line-height:22px;color:#fff;opacity:.5}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step::-webkit-scrollbar{display:none}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step-2 input{padding-left:40px}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step-2 .control{position:relative}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step-2 .control:before{content:"";width:20px;height:20px;position:absolute;top:42px;left:12px;background-image:url('+d+')}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .step-2 .xa-loader{display:flex;position:relative}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions{width:100%;display:flex;padding:25px 0;justify-content:center;border-top:1px solid rgba(231,232,232,.2);background-color:#0c353e}@media screen and (max-width:427px){.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions{margin:0!important}}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions button{padding:20px 55px!important;font-weight:500;font-size:14px;line-height:18px}@media screen and (max-width:500px){.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions button{height:unset!important}}@media screen and (max-width:427px){.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions button{padding:12px 55px!important}}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions .back,.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions .create{padding:20px 25px!important}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions .back{background-color:transparent;color:#fff;border:unset}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions .cancel{display:none;background-color:transparent;color:#fff;border:unset}@media screen and (max-width:767px){.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions .cancel{display:flex}}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions-1{padding:25px 12px}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .private-creation .actions-1 button{width:100%}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members{height:calc(100% - 35px);display:flex;flex-direction:column;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none;padding:20px 12px}@media screen and (max-width:500px){.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members{height:calc(100% - 15px)}}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members .members-list{display:flex;flex-direction:column;overflow:auto!important;-ms-overflow-style:none;scrollbar-width:none}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members .members-list .member{display:flex;align-items:center;margin-bottom:12px}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members .members-list .member .member-avatar{display:flex;position:relative;margin-right:16px}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members .members-list .member .member-avatar img{width:32px;height:32px;border-radius:50%}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members .members-list .member .member-avatar .default-avatar{width:32px;height:32px;display:flex;justify-content:center;align-items:center;background-color:#f85454;border-radius:50%;font-weight:300;font-size:13px;text-transform:uppercase}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members .members-list .member .online:after{content:"";position:absolute;width:12px;height:12px;bottom:-3px;right:-2px;background-color:#2ddc1e;border-radius:50%;border:3px solid #08252c}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members .members-list .member span{font-weight:400;font-size:15px;line-height:20px;color:#fff;opacity:.5;text-transform:none}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members .members-list::-webkit-scrollbar{display:none}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members input{padding-left:40px;margin-bottom:15px;background-color:transparent;border:1px solid #2a4e55!important;color:#94a6aa!important}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members input::-moz-placeholder{color:#94a6aa!important}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members input::placeholder{color:#94a6aa!important}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members .control{position:relative}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members .control:before{content:"";width:20px;height:20px;position:absolute;top:17px;left:12px;background-image:url('+d+")}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .members::-webkit-scrollbar{display:none}.xt-locker-room-supported[data-v-a87ff42c] .chat-container .scroll-to-bottom{position:absolute;bottom:60px;right:20px;z-index:1;background-color:#08252c;width:50px;height:50px;border-radius:50%;cursor:pointer}",""]),e.exports=l},2709:function(e,t,r){"use strict";r.r(t);r(17),r(16),r(19),r(13),r(20);var n=r(0),o=r(93),c=r(5),l=(r(27),r(8),r(28),r(31),r(383),r(81),r(14),r(67),r(79),r(124),r(56),r(190),r(36)),d=r(11),h=r(382),f=r(41),m=r.n(f),v=r(1379),x=r(1415),w=r(1603),y=r(1308);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var S={name:"XTLockerRoomSupported",components:{XOLockerRoomChannels:x.default,XOChannelsChatInput:w.default,GifsComponent:y.a,XOChannelsChatHeader:function(){return r.e(33).then(r.bind(null,2565))},XOChannelsChatHistory:function(){return Promise.all([r.e(6),r.e(86)]).then(r.bind(null,2711))},XOChatFriendsList:function(){return r.e(158).then(r.bind(null,2712))},XMChannelsChatLightbox:function(){return Promise.all([r.e(4),r.e(13)]).then(r.bind(null,2654))},XAFormsInput:function(){return r.e(1).then(r.bind(null,2067))},XALoader:function(){return Promise.resolve().then(r.bind(null,1371))}},props:{channelSlug:{type:String,default:""},game:{type:Object,default:function(){}},privateChannel:{type:Object,default:function(){}},privateChats:{type:Array,default:function(){return[]}},activeChat:{type:String,required:!0},currentStep:{type:Number,default:1},lockerRoom:{type:Object,default:function(){}},publicMembers:{type:Array,default:function(){return[]}},onlineMembers:{type:Array,default:function(){return[]}}},validators:{groupName:function(e){return h.Validator.value(e).required("Group Name field is required.")}},data:function(){return{showInfiniteLoading:!1,showScrollToBottom:!1,groupName:"",searchFriends:"",searchMembers:"",usersList:[],filteredMembers:null,usersCountLeft:null,step:this.currentStep,selectedFriendsIds:[],nextLoading:!1,createLoading:!1,isFetchingUsers:!1,isSearchingUsers:!1,media:[],emojis:[],search:"",searchOffset:0,activeNav:"Emoji",members:[]}},computed:C(C(C(C(C({},Object(d.b)("app",["showOnlineMembers"])),Object(d.b)("user",["userName"])),Object(d.b)("locker-room",["lockerRoomConnectingToChannel"])),Object(l.c)({getMediaLightbox:"media/getMediaLightbox"})),{},{privateOwner:function(){var e;return(null===(e=this.privateChannel)||void 0===e?void 0:e.Roles.Owners)||[]},privateJoiners:function(){var e;return(null===(e=this.privateChannel)||void 0===e?void 0:e.Roles.Joiners)||[]},allPrivateMembers:function(){return[].concat(Object(o.a)(this.privateOwner),Object(o.a)(this.privateJoiners))},chats:function(){var e;return(null===(e=this.$parent)||void 0===e?void 0:e.chats)||[]},channel:function(){var e;return(null===(e=this.$parent)||void 0===e?void 0:e.channel)||{}},channelGroupID:function(){var e;return(null===(e=this.channel)||void 0===e?void 0:e.channelGroupID)||null},isLive:function(){var e;return(null===(e=this.$parent)||void 0===e?void 0:e.isLive)||!1},usersTyping:function(){var e,t=this;return(null===(e=this.$parent)||void 0===e?void 0:e.usersTyping.filter((function(e){return e!==t.userName})))||[]},onlineUsers:function(){var e=this.onlineMembers?this.onlineMembers.map((function(e){var t;return null==e||null===(t=e.User)||void 0===t?void 0:t.id})):[];return e},userOnline:function(){var e=this;return function(t){return e.onlineUsers.includes(t)}},triggerGifsSearch:function(){return"".concat(this.search,"|").concat(this.searchOffset)}}),watch:{activeNav:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.search="",t.searchOffset=0,t.setFilteredGifs([]),"GIF"!==e){r.next=6;break}return r.next=6,t.loadGifs();case 6:if("Sticker"!==e){r.next=9;break}return r.next=9,t.loadGifs(!0);case 9:case"end":return r.stop()}}),r)})))()},search:function(){document.querySelector(".gifs-container").scrollTop=0,this.searchOffset=0,this.setFilteredGifs([])},triggerGifsSearch:m()(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("GIF"!==this.activeNav){e.next=5;break}return e.next=3,this.searchGifs({value:t,offset:this.searchOffset});case 3:e.next=8;break;case 5:if("Sticker"!==this.activeNav){e.next=8;break}return e.next=8,this.searchGifs({value:t,offset:this.searchOffset,stickers:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),700),activeChat:{handler:function(){Object(v.b)(),this.fnScrollToBottom(),this.getMemberList()}},currentStep:{handler:function(e){this.step=e}},searchMembers:{deep:!0,handler:function(e){this.getMemberList(),""===e?this.filteredMembers=null:this.filterMembersList(e)}}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadGifs("Sticker"===e.activeNav);case 2:e.fnScrollToBottom(),e.getMemberList();case 4:case"end":return t.stop()}}),t)})))()},beforeMount:function(){window.addEventListener("resize",this.fnCheckWindowSize)},mounted:function(){var e=this;this.$root.$on("evtRtScrollToBottom",(function(){e.fnScrollToBottom()})),this.$root.$on("evtRtShowScrollToBottom",(function(t){e.showScrollToBottom=t})),this.fnCheckWindowSize(),this.$root.$on("evtRtSetLightboxMedia",(function(t){e.media=t})),this.$root.$on("evtRtShowLightbox",(function(t){var r;e.media.length&&(null===(r=e.$refs.lightboxGallery)||void 0===r||r.showImage(t))}))},beforeDestroy:function(){window.removeEventListener("resize",this.fnCheckWindowSize)},methods:C(C(C({},Object(l.b)({loadGifs:"giphy/loadGifs",searchGifs:"giphy/searchGifs"})),Object(l.d)("giphy",["setFilteredGifs"])),{},{onScrollUsers:function(e){var t;!(e.target.scrollTop+e.target.clientHeight+100>e.target.scrollHeight)||this.isFetchingUsers||null!==(t=this.usersCountLeft)&&void 0!==t&&!t||this.loadNext()},loadNext:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isFetchingUsers=!0,t.prev=1,t.next=4,e.$api.getAvailableMembersForPrivateChannel({lockerRoomID:e.lockerRoom.id,next:e.usersList.length?e.usersList[e.usersList.length-1].id:null,name:e.searchFriends});case 4:n=t.sent,c=n.getAvailableUsersForPrivateChannel,(r=e.usersList).push.apply(r,Object(o.a)(c.items)),e.usersCountLeft=c.count,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.$toast.error((null===t.t0||void 0===t.t0?void 0:t.t0.message)||"Something went wrong",{duration:3e3,position:"bottom-left",className:"fx1-error",iconPack:"mdi",icon:"alert-circle-outline"});case 13:e.isFetchingUsers=!1;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},nextStep:function(){var e=this;this.nextLoading=!0,this.$validate().then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=21;break}return t.prev=1,e.nextLoading=!0,t.next=5,e.$api.getAvailableMembersForPrivateChannel({lockerRoomID:e.lockerRoom.id});case 5:n=t.sent,o=n.getAvailableUsersForPrivateChannel,e.usersList=o.items,e.usersCountLeft=o.count,e.nextLoading=!1,e.$emit("changeStep",2),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.error(t.t0);case 16:return t.prev=16,e.nextLoading=!1,t.finish(16);case 19:t.next=22;break;case 21:e.nextLoading=!1;case 22:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})));return function(e){return t.apply(this,arguments)}}())},fnHandleScrollGifs:function(e){var t=e.target,r=t.clientHeight,n=t.scrollHeight,o=t.scrollTop;!this.search||"GIF"!==this.activeNav&&"Sticker"!==this.activeNav||n-r<=o&&this.searchOffset++},back:function(){this.$emit("changeStep",1)},cancel:function(){this.$emit("cancel")},create:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.selectedFriendsIds,e.createLoading=!0,t.next=4,e.$api.createChannel({input:{name:e.groupName,type:"Private",channelGroupID:e.channelGroupID,userIDs:r}});case 4:n=t.sent,o=n.createChannel,e.$mixpanelClient.trackCreatePrivateRoom({lockerRoom:e.lockerRoom,game:e.game}),e.$emit("getPrivateChannel",o.objectID),e.createLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},fnScrollToBottom:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";if(r&n){var element=document.querySelector(".xa-channels-typing");this.$nextTick((function(){null==element||element.scrollIntoView({behavior:r,block:n}),t.showInfiniteLoading=!0}))}else{var o=null===(e=document.querySelector(".xo-channel-chat-history"))||void 0===e?void 0:e.closest(".vuebar");o&&o.scrollTo({top:o.scrollHeight,behavior:"smooth"}),this.showInfiniteLoading=!0,this.showScrollToBottom=!1}},fnCheckWindowSize:function(){window.innerWidth<=768?this.showOnlineMembers=!1:this.showOnlineMembers=!0},getMemberList:function(){"public-members"===this.activeChat?this.members=Object(o.a)(this.publicMembers):"private-members"===this.activeChat&&(this.members=Object(o.a)(this.allPrivateMembers))},filterMembersList:function(e){""!==e&&(this.filteredMembers=this.members.filter((function(t){return t.User.username.toLowerCase().includes(e.toLowerCase())})),this.members=this.filteredMembers)},filterAvailableUsers:m()(Object(n.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isSearchingUsers=!0,e.next=3,this.$api.getAvailableMembersForPrivateChannel({lockerRoomID:this.lockerRoom.id,name:this.searchFriends});case 3:t=e.sent,r=t.getAvailableUsersForPrivateChannel,this.usersList=r.items,this.usersCountLeft=r.count,this.isSearchingUsers=!1;case 8:case"end":return e.stop()}}),e,this)}))),500)})},O=S,j=(r(2557),r(10)),component=Object(j.a)(O,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"xt-locker-room-supported row"},[r("div",{staticClass:"chat-container col flex-column",class:{h100vh:e.isLive}},["public"!==e.activeChat||e.lockerRoomConnectingToChannel?e._e():r("div",{staticClass:"public"},[r("div",{directives:[{name:"bar",rawName:"v-bar"}],staticClass:"chat-history-container col",class:{cutted:!e.isLoggedIn}},[r("div",{staticClass:"vuebar"},[r("XOChannelsChatHistory",{attrs:{chats:e.chats,"show-infinite-loading":e.showInfiniteLoading,"users-typing":e.usersTyping,channelSlug:e.channelSlug,"active-chat":e.activeChat,search:e.search},on:{handleScrollGifs:e.fnHandleScrollGifs,updateMessage:function(t){return e.emojis.push(t)},updateSearch:function(t){e.search=t},updateNav:function(t){e.activeNav=t}}})],1),e.showScrollToBottom?r("div",{staticClass:"scroll-to-bottom row items-center justify-center",on:{click:function(t){return t.preventDefault(),e.fnScrollToBottom("smooth","end")}}},[r("b-icon",{attrs:{icon:"chevron-down","custom-size":"mdi-24px"}})],1):e._e()]),e.isLoggedIn?r("XOChannelsChatInput",{attrs:{"is-supporting":"",isLive:e.isLive,emojis:e.emojis}}):e._e()],1),"private"===e.activeChat&&e.privateChannel&&!e.lockerRoomConnectingToChannel?r("div",{staticClass:"private"},[r("div",{directives:[{name:"bar",rawName:"v-bar"}],staticClass:"chat-history-container private-chat col",class:{cutted:!e.isLoggedIn}},[r("div",{staticClass:"vuebar"},[r("XOChannelsChatHistory",{attrs:{chats:e.privateChats,"show-infinite-loading":e.showInfiniteLoading,"users-typing":e.usersTyping,privateChannel:e.privateChannel,"active-chat":e.activeChat,search:e.search},on:{handleScrollGifs:e.fnHandleScrollGifs,updateMessage:function(t){return e.emojis.push(t)},updateSearch:function(t){e.search=t},updateNav:function(t){e.activeNav=t}}})],1),e.showScrollToBottom?r("div",{staticClass:"scroll-to-bottom row items-center justify-center",on:{click:function(t){return t.preventDefault(),e.fnScrollToBottom("smooth","end")}}},[r("b-icon",{attrs:{icon:"chevron-down","custom-size":"mdi-24px"}})],1):e._e()]),e.isLoggedIn?r("XOChannelsChatInput",{attrs:{"is-supporting":"",isLive:e.isLive,emojis:e.emojis,"active-chat":e.activeChat,"private-channel":e.privateChannel}}):e._e()],1):e._e(),"private"!==e.activeChat||e.privateChannel?e._e():r("div",{staticClass:"private-creation"},[1===e.step?r("div",{staticClass:"step step-1"},[r("span",[e._v("Group name")]),r("XAFormsInput",{attrs:{disabled:!e.isLoggedIn,placeholder:"# My private group",error:e.validation.firstError("groupName")},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}})],1):e._e(),2===e.step?r("div",{staticClass:"step step-2",on:{scroll:e.onScrollUsers}},[r("span",[e._v("Add Members")]),r("XAFormsInput",{attrs:{placeholder:"Search"},on:{input:e.filterAvailableUsers},model:{value:e.searchFriends,callback:function(t){e.searchFriends=t},expression:"searchFriends"}}),r("p",[e._v("Find your friends below or invite new friends once your group is created.")]),e.isSearchingUsers?r("XALoader"):e._e(),r("XOChatFriendsList",{directives:[{name:"show",rawName:"v-show",value:!e.isSearchingUsers,expression:"!isSearchingUsers"}],attrs:{friendsList:e.usersList,onlineMembers:e.onlineMembers,selectedFriendsIds:e.selectedFriendsIds},on:{"update:selectedFriendsIds":function(t){e.selectedFriendsIds=t},"update:selected-friends-ids":function(t){e.selectedFriendsIds=t}}}),e.isFetchingUsers?r("XALoader"):e._e()],1):e._e(),1===e.step&&e.isLoggedIn?r("div",{staticClass:"actions actions-1"},[r("b-button",{staticClass:"is-uppercase cancel",on:{click:function(t){return e.cancel()}}},[e._v(e._s("CANCEL"))]),r("b-button",{staticClass:"is-uppercase next",attrs:{type:"is-primary",loading:e.nextLoading},on:{click:function(t){return e.nextStep()}}},[e._v(e._s("NEXT"))])],1):e._e(),2===e.step?r("div",{staticClass:"actions actions-2"},[r("b-button",{staticClass:"is-uppercase back",on:{click:function(t){return e.back()}}},[e._v(e._s("BACK"))]),r("b-button",{staticClass:"is-uppercase create",attrs:{type:"is-primary",loading:e.createLoading},on:{click:function(t){return e.create()}}},[e._v(e._s("CREATE"))])],1):e._e()]),"private-members"===e.activeChat||"public-members"===e.activeChat?r("div",{staticClass:"members"},[r("XAFormsInput",{attrs:{placeholder:"Search",disabled:!e.isLoggedIn},model:{value:e.searchMembers,callback:function(t){e.searchMembers=t},expression:"searchMembers"}}),r("div",{staticClass:"members-list"},e._l(e.members,(function(t){return r("div",{key:t.User.id,staticClass:"member"},[r("div",{staticClass:"member-avatar",class:[e.userOnline(t.User.id)?"online":""]},[t.User.Avatar&&t.User.Avatar.PhotoURL?r("img",{attrs:{src:t.User.Avatar.PhotoURL}}):r("div",{staticClass:"default-avatar"},[e._v(e._s(t.User.username.charAt(0).toUpperCase()))])]),r("span",[e._v(e._s(t.User.username))])])})),0)],1):e._e()]),r("XMChannelsChatLightbox")],1)}),[],!1,null,"a87ff42c",null);t.default=component.exports}}]);