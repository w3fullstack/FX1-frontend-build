(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{1879:function(e,t,r){var content=r(2108);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(35).default)("4dad58d4",content,!0,{sourceMap:!1})},2107:function(e,t,r){"use strict";r(1879)},2108:function(e,t,r){var n=r(34)(!1);n.push([e.i,".xp-user-invite[data-v-3a7b5199]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:11;background-color:#fff}",""]),e.exports=n},2604:function(e,t,r){"use strict";r.r(t);r(17),r(16),r(14),r(19),r(13),r(20);var n=r(5),o=r(0),c=(r(8),r(75),r(79),r(124),r(27),r(11)),v=r(36);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"PageUserInvite",asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,v,l,d,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.app,o=e.route,c=null==o||null===(r=o.query)||void 0===r?void 0:r.accept,t.prev=2,t.next=5,n.$api.getUserInvite({id:c});case 5:if(l=t.sent,d=l.getUserInvite){t.next=9;break}return t.abrupt("return");case 9:if("InviteToPrivateChannel"===(f=d.type)){t.next=16;break}return t.next=14,n.$api.invitedUserExists({id:c});case 14:h=t.sent,v=h.invitedUserExists;case 16:return t.abrupt("return",{invitedUserExists:v,getUserInvite:d,type:f,id:c});case 19:t.prev=19,t.t0=t.catch(2),console.error(t.t0);case 22:case"end":return t.stop()}}),t,null,[[2,19]])})))()},computed:d({},Object(c.b)("signup",["email"])),mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,v,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.getUserInvite){t.next=3;break}return e.showErrorToast("Invalid invitation link"),t.abrupt("return");case 3:if("InviteToPrivateChannel"!==e.type){t.next=23;break}if(!e.isLoggedIn){t.next=20;break}return t.prev=5,t.next=8,e.$api.acceptInvitationToPrivateChannel({token:e.id});case 8:r=t.sent,n=r.acceptInvitationToPrivateChannel,o=n.objectID,c=o.indexOf("io")+2,v=o.substring(c),e.$router.push(v),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),e.showError(t.t0);case 19:return t.abrupt("return");case 20:e.$router.push({name:"signup",query:{step:1,accept:e.id}}),t.next=40;break;case 23:if(!e.isLoggedIn){t.next=26;break}return t.next=26,e.authLogOut();case 26:if(void 0!==e.invitedUserExists){t.next=30;break}return e.$store.dispatch("signup/setSignUpOwnerManagerInvite",null),e.showErrorToast("Invalid invitation link"),t.abrupt("return");case 30:return t.next=32,e.setSignUpOwnerManagerInvite(e.getUserInvite);case 32:if(l=e.getUserInvite.data.emailAddress,e.email=l,!e.invitedUserExists){t.next=37;break}return e.$router.push({path:"/signin"}),t.abrupt("return");case 37:e.$router.push({path:"/signup?step=1"}),d={pageName:"Invite manager",isLoggedIn:e.isLoggedIn},e.$mixpanelClient.trackViewPage(d);case 40:case"end":return t.stop()}}),t,null,[[5,16]])})))()},methods:d(d({},Object(v.b)({authLogOut:"auth/authLogOut",setSignUpOwnerManagerInvite:"signup/setSignUpOwnerManagerInvite"})),{},{showErrorToast:function(e){this.$toast.error(e,{duration:3e3,position:"top-center"}),this.$router.push({path:"/"})},showError:function(e){var t=e.toString();if(t===function(e){if(t.includes(e))return t}("cannot create or join more"))this.$toast.error("You cannot create or join more than one private group per game.",{duration:5e3,position:"top-center"});this.$router.push({path:"/"})}})},h=(r(2107),r(10)),component=Object(h.a)(f,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"xp-user-invite"})}),[],!1,null,"3a7b5199",null);t.default=component.exports}}]);